<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Hero Run</title>
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #D32F2F; /* Red */
            --accent: #FFD700;
            --danger: #C62828;
            --sky: #81D4FA;
            --ground: #37474F;
        }
        body { font-family: 'Prompt', sans-serif; margin: 0; overflow: hidden; background: var(--sky); touch-action: none; }
        .hud { position: absolute; top: 20px; left: 20px; z-index: 10; font-size: 1.5rem; font-weight: bold; color: #fff; text-shadow: 1px 1px 0 #000; }
        .hud span { color: var(--accent); }
        canvas { display: block; width: 100%; height: 100%; }
        .overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); display: flex; flex-direction: column; align-items: center; justify-content: center; color: white; z-index: 20; }
        .title { font-size: 3rem; font-weight: 900; color: var(--accent); text-transform: uppercase; margin-bottom: 10px; text-shadow: 2px 2px var(--danger); }
        .btn-start { padding: 15px 40px; font-size: 1.8rem; background: var(--primary); color: white; border: none; border-radius: 50px; cursor: pointer; font-family: 'Prompt', sans-serif; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
    </style>
</head>
<body>
    <div class="hud">SCORE: <span id="score">0</span> | <i class="fa-solid fa-heart" style="color:#D32F2F"></i> x <span id="hearts">0</span></div>
    <canvas id="gameCanvas"></canvas>
    <div id="startScreen" class="overlay">
        <div class="title">HERO RUN</div><div style="margin-bottom:20px">วิ่งกู้ชีพ เก็บหัวใจบริจาค</div>
        <button class="btn-start" onclick="initGame()">แตะเพื่อเริ่มวิ่ง!</button>
    </div>
    <div id="gameOverScreen" class="overlay" style="display: none;">
        <div class="title" style="color:#FF5252">GAME OVER</div>
        <div style="font-size:2rem; margin-bottom:20px">คะแนน: <span id="finalScore" style="color:gold">0</span></div>
        <button class="btn-start" onclick="initGame()">เล่นใหม่</button>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas'); const ctx = canvas.getContext('2d');
        let gameSpeed, score, hearts, isGameOver, frame, player, obstacles, items, animId;
        const icons = { player: '\uf0f0', heart: '\uf004', virus: '\ue074' };

        function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
        window.addEventListener('resize', resize); resize();

        class Player {
            constructor() { this.size=50; this.x=50; this.y=canvas.height-150; this.vy=0; this.gravity=0.8; this.jumpStrength=-15; this.groundY=canvas.height-150; this.isJumping=false; }
            update() { this.y+=this.vy; if(this.y<this.groundY){this.vy+=this.gravity;}else{this.y=this.groundY;this.vy=0;this.isJumping=false;} }
            draw() { 
                ctx.font='900 50px "Font Awesome 6 Free"'; 
                ctx.fillStyle='#FFFFFF'; ctx.fillText(icons.player, this.x, this.y+this.size); // ชุดขาว
                ctx.lineWidth=2; ctx.strokeStyle='#D32F2F'; ctx.strokeText(icons.player, this.x, this.y+this.size); // ขอบแดง
            }
            jump() { if(!this.isJumping){this.vy=this.jumpStrength;this.isJumping=true;} }
        }

        class Obstacle {
            constructor() { this.x=canvas.width; this.y=canvas.height-140; this.size=40; this.del=false; }
            update() { this.x-=gameSpeed; if(this.x<-this.size)this.del=true; }
            draw() { ctx.font='900 40px "Font Awesome 6 Free"'; ctx.fillStyle='#5E35B1'; ctx.fillText(icons.virus, this.x, this.y+this.size); }
        }

        class Item {
            constructor() { this.x=canvas.width; this.y=Math.random()>0.5?canvas.height-150:canvas.height-250; this.size=40; this.del=false; }
            update() { this.x-=gameSpeed; this.y+=Math.sin(frame*0.1)*2; if(this.x<-this.size)this.del=true; }
            draw() { ctx.font='900 40px "Font Awesome 6 Free"'; ctx.fillStyle='#D32F2F'; ctx.fillText(icons.heart, this.x, this.y+this.size); }
        }

        function initGame() {
            document.getElementById('startScreen').style.display='none'; document.getElementById('gameOverScreen').style.display='none';
            player = new Player(); obstacles = []; items = []; score=0; hearts=0; gameSpeed=6; isGameOver=false; frame=0;
            animate();
        }

        function animate() {
            if(isGameOver)return;
            ctx.clearRect(0,0,canvas.width,canvas.height);
            
            // Ground
            ctx.fillStyle='#37474F'; ctx.fillRect(0,canvas.height-100,canvas.width,100);
            ctx.strokeStyle='#D32F2F'; ctx.lineWidth=5; ctx.beginPath(); ctx.moveTo(0,canvas.height-100); ctx.lineTo(canvas.width,canvas.height-100); ctx.stroke();

            player.update(); player.draw();

            if(frame%120===0 && Math.random()<0.6) obstacles.push(new Obstacle());
            obstacles.forEach((o,i)=>{ o.update(); o.draw(); if(player.x<o.x+o.size && player.x+player.size>o.x && player.y<o.y+o.size && player.y+player.size>o.y) gameOver(); if(o.del)obstacles.splice(i,1); });

            if(frame%90===0 && Math.random()<0.7) items.push(new Item());
            items.forEach((it,i)=>{ 
                it.update(); it.draw(); 
                if(player.x<it.x+it.size && player.x+player.size>it.x && player.y<it.y+it.size && player.y+player.size>it.y) {
                    score+=100; hearts++; items.splice(i,1); if(hearts%5===0)gameSpeed+=0.5;
                }
                if(it.del)items.splice(i,1); 
            });

            if(frame%10===0) score++;
            document.getElementById('score').innerText=score; document.getElementById('hearts').innerText=hearts;
            frame++; animId=requestAnimationFrame(animate);
        }

        function gameOver() { isGameOver=true; document.getElementById('finalScore').innerText=score; document.getElementById('gameOverScreen').style.display='flex'; }
        window.addEventListener('touchstart', (e)=>{e.preventDefault();player.jump();});
        window.addEventListener('mousedown', ()=>player.jump());
        window.addEventListener('keydown', (e)=>{if(e.code==='Space')player.jump();});
    </script>
</body>
</html>
